<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>JS之路 Day12 - Asynchronous Programming (非同步程式設計) | Vic blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="前言Asynchronous的中文翻譯是非同步、異步，Synchronous的中文翻譯是同步，以下都會直接用同步、非同步來介紹。">
<meta property="og:type" content="article">
<meta property="og:title" content="JS之路 Day12 - Asynchronous Programming (非同步程式設計)">
<meta property="og:url" content="https://yoshuu.github.io/2022/09/27/JS12/index.html">
<meta property="og:site_name" content="Vic blog">
<meta property="og:description" content="前言Asynchronous的中文翻譯是非同步、異步，Synchronous的中文翻譯是同步，以下都會直接用同步、非同步來介紹。">
<meta property="og:locale" content="zh_TW">
<meta property="og:image" content="https://i.imgur.com/GBZWDPq.png">
<meta property="og:image" content="https://i.imgur.com/5ETGG5M.png">
<meta property="og:image" content="https://i.imgur.com/qH8ox5q.png">
<meta property="og:image" content="https://i.imgur.com/gZM3DuZ.png">
<meta property="og:image" content="https://i.imgur.com/MVqKzMb.png">
<meta property="article:published_time" content="2022-09-27T07:53:45.000Z">
<meta property="article:modified_time" content="2023-04-24T12:37:45.687Z">
<meta property="article:author" content="可以點選上方“Vic blog”回到首頁～">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.imgur.com/GBZWDPq.png">
  
    <link rel="alternate" href="/atom.xml" title="Vic blog" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 6.1.0"><link rel="stylesheet" href="/css/prism.css" type="text/css"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Vic blog</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜尋"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="搜尋"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://yoshuu.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-JS12" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2022/09/27/JS12/" class="article-date">
  <time class="dt-published" datetime="2022-09-27T07:53:45.000Z" itemprop="datePublished">2022-09-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/2022-iThome-%E9%90%B5%E4%BA%BA%E8%B3%BD/">2022 iThome 鐵人賽</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      JS之路 Day12 - Asynchronous Programming (非同步程式設計)
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p><code>Asynchronous</code>的中文翻譯是非同步、異步，<code>Synchronous</code>的中文翻譯是同步，以下都會直接用同步、非同步來介紹。</p>
<span id="more"></span>

<p>非同步程式設計是<code>JavaScript</code>在學習時一個很大的重點，不光是容易誤解，不好理解，也因為實際上要常常使用到。</p>
<p>這一篇不講太多專業術語跟程式範例，會試著用很白話的方式把非同步這件事情給講清楚，那就直接開始進入今天的主題！</p>
<h2 id="JavaScript是單一執行緒"><a href="#JavaScript是單一執行緒" class="headerlink" title="JavaScript是單一執行緒"></a><code>JavaScript</code>是單一執行緒</h2><p>這是我覺得在了解同步跟非同步之前要先理解的第一個點，先完全不要管什麼是同步，什麼是非同步，一開始請先知道這個：</p>
<p><strong>Javascript 程式執行，一次只能執行一件事情</strong>。</p>
<p>就像是一家餐廳，就只有一個廚師，那他就只能一次煮一道菜，假如有兩個廚師，就是同時煮兩道菜，很多廚師可以同時煮很多菜那就是多執行緒，可以一次同時進行很多事情。</p>
<p>無論如何，要記住這家叫做「Javascript」的餐廳，永遠只有一個廚師(執行緒)。</p>
<h2 id="JavaScript-同步跟非同步"><a href="#JavaScript-同步跟非同步" class="headerlink" title="JavaScript 同步跟非同步"></a><code>JavaScript</code> 同步跟非同步</h2><p>剛開始學習時，同步會讓人感覺是，全部的動作同時開始進行，所以容易誤會(誤會同步&#x3D;同時)。<br>後來去查閱一些資料後發現其實同步是 &#x3D;&gt; 一次做一件事情。<br>既然同步是一次做一件事情，那非同步不就是一次做很多事情？</p>
<p>所以會發現到說很多教學文章會這樣寫：</p>
<blockquote>
<p>同步：一次就只做一件事情<br>非同步：一次同時做很多件事情</p>
</blockquote>
<p>使用”同時間”能處理事情的多寡來區分 JS 的同步跟非同步的文章真的很多。<br>可能這講法也沒有錯，但就會發生衝突，對剛學習沒多久的人造成心靈打擊，造成懂的人看得懂，不懂的人看不懂。</p>
<p>而我的理解 &#x3D;&gt;<br>單執行緒的<code>JavaScript</code>就像是餐廳的只有一個廚師，假如要說非同步是一次同時做很多件事情，就好似說突然冒出一堆廚師一樣，最主要發生的衝突，就是上面說的：</p>
<p><strong>Javascript 程式執行，一次只能做一件事情</strong>。</p>
<p>也許可以用很多個廚師，同時做很多事情的方法來做到非同步，但我<code>JavaScript</code>就只有一個廚師，怎麼辦呢？</p>
<p>先來看看另一個概念吧。</p>
<h2 id="平行-Parallelism-與並行-Concurrency"><a href="#平行-Parallelism-與並行-Concurrency" class="headerlink" title="平行(Parallelism)與並行(Concurrency)"></a>平行(Parallelism)與並行(Concurrency)</h2><p>這個概念是我從<a target="_blank" rel="noopener" href="https://www.ithome.com.tw/voice/91464">執行資料平行處理的效能考量</a>看到的，我覺得可以很好的解釋<code>JavaScript</code>如何在自身只能是單執行緒的情況下，達成到非同步的效果，同時又不會跟單執行緒的特性(一次做一件事情)發生衝突。</p>
<p>以下節錄文章概念：</p>
<blockquote>
<p>平行（Parallelism）與並行（Concurrency）不同，如果兩個任務分配到一個 CPU 核心，在取得的時間片段中交互執行，稱之為並行。如果有兩個核心，兩個任務各分配到其中之一同時執行，稱之為平行。現今開發者對於並行設計應不陌生，利用並行運算處理多個流程，讓客戶端以為任務「同時」執行，或者是某任務被阻斷（Block）之時，切換另一任務執行，避免等待而浪費 CPU 執行時間，用以提升整體任務執行效率。</p>
</blockquote>
<p>很好的解釋了一些盲點區域，上面有提到很多教學會講說非同步是一次同時做很多事情，其實那就是一種平行處理，確實也是一種非同步，但卻永遠不可能是<code>JavaScript</code>的非同步。</p>
<p>因為<code>JavaScript</code>這間餐廳的廚師就只有一個，要有很多人才能平行耶，我畫示意圖比較清楚。</p>
<p>多人廚師 &#x3D;&gt; 平行處理 &#x3D;&gt; 同時做很多菜 &#x3D;&gt; 大家都很開心：<br><img src="https://i.imgur.com/GBZWDPq.png"></p>
<p>只有一個廚師 &#x3D;&gt; 平行處理 &#x3D;&gt; 同時做很多菜 &#x3D;&gt; 廚師不開心 ：<br><img src="https://i.imgur.com/5ETGG5M.png"></p>
<p>那就一個個慢慢做如何？<br><img src="https://i.imgur.com/qH8ox5q.png"><br>客人不開心。<br>而且中間要是過程有一個卡住，之後的菜也就都不用做了。</p>
<p>欸，那該怎麼辦，我大<code>JavaScript</code>餐廳就是只想請一個廚師，但又不想要廚師只能一個個做，那會花超久時間，聰明的大<code>JavaScript</code>餐廳想到了一個好辦法，剛剛那個是平行處理，那何不來試試並行處理？</p>
<p><strong>並行處理:</strong><br>交互執行，稱之為並行，要怎麼辦到這件事情，簡單來說就是不卡住，那是什麼意思？比如來說小白今天要做兩件事情，一個是烤土司一個是倒牛奶，而小白今天就只有一個人，所以沒辦法使用平行處理，除非小白會影分身。</p>
<p>除了慢慢來，先烤完吐司再倒牛奶之外，還有另外一種選擇，你可以先把你的吐司塞到烤土司機之後，不要在那邊傻傻等它，按下按鈕開始烤後，就衝去冰箱拿牛奶出來倒，倒完再看吐司好了沒。</p>
<p><strong>這種做完後不停留到完全結束，就直接去做下一步的處理方式其實就是並行處理。</strong></p>
<p>也因為這樣，所以看起來結果會很像是同時開始做，但是並沒有，可以來比較差異時間，請小白為我們示範一下，示意圖有請：</p>
<p><img src="https://i.imgur.com/gZM3DuZ.png"></p>
<p>為什麼有一堆人會覺得 JS 非同步就是「同時」做很多事情，我覺得關鍵這就是在這邊，但因為單執行緒的觀念，就勢必不可能同時(平行處理)，所以 JS 所謂的「非同步」操作，其實是比較偏向示意圖的第三種，也就是並行處理，這也是我個人所理解的 Asynchronous Programming (非同步程式設計)。</p>
<h2 id="阻塞與非阻塞"><a href="#阻塞與非阻塞" class="headerlink" title="阻塞與非阻塞"></a>阻塞與非阻塞</h2><p>根據上面的想法，我認為同步在處理事件的流程會被「卡住」，卡住的意思是說，當遇到沒辦法馬上執行完成的東西，就會整個停住，下一件要做的事情就會停擺。</p>
<p>而非同步在處理事件的流程不會被「卡住」，所以因為不會被卡住，所以看起來像是「一次同時做很多件事情」，但實際上沒有。</p>
<p>而這卡住不卡住其實比較跟阻塞(blocking)與非阻塞(non-blocking)有關，詳細的可以去看 Node.js 的官方文件有講到這一塊：<a target="_blank" rel="noopener" href="https://nodejs.org/en/docs/guides/blocking-vs-non-blocking/">Overview of Blocking vs Non-Blocking</a></p>
<p>這邊只簡單介紹：</p>
<ul>
<li>阻塞（blocking）&#x3D;&gt; 代表執行時程式會卡在那一行，直到有結果。</li>
<li>非阻塞（non-blocking）&#x3D;&gt; 代表執行時不會卡住，沒有看到結果也會繼續執行下去。</li>
</ul>
<p>很像剛剛在描述同步跟非同步吧？其實在<code>JavaScript</code>當中，可以把兩個劃上等號，剛剛 Node.js 的官方文件有一段是這樣講的：<br><img src="https://i.imgur.com/MVqKzMb.png"><br>圖片來源：<a target="_blank" rel="noopener" href="https://nodejs.org/en/docs/guides/blocking-vs-non-blocking/">Node.js 官方文件</a><br>這段的意思就是，阻塞的方法會同步的方式執行，而非阻塞的方法會非同步的方式執行，所以我會把兩種當作是同一種東西，注意僅限於<code>JavaScript</code>，其他語言可能不一定，要是全部都一模一樣那幹嘛分兩個不一樣的名稱對吧？</p>
<h2 id="總結"><a href="#總結" class="headerlink" title="總結"></a>總結</h2><p>準備要來下結論了，前面有提過到的一次做很多事情，看完上面的文章，相信你已經知道那並不是<code>JavaScript</code>非同步的特色，<code>JavaScript</code>永遠不會一次做很多事情，而實際上是怎麼在<code>JavaScript</code>做到非同步這件事情的，這就是明天要來講的主題，我們明天見啦～</p>
<h2 id="reference"><a href="#reference" class="headerlink" title="reference"></a>reference</h2><p>[1] <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Learn/JavaScript/Asynchronous/Introducing">MDN - Introducing asynchronous JavaScript</a><br>[2] <a target="_blank" rel="noopener" href="https://www.w3schools.com/js/js_asynchronous.asp">W3Schools - Asynchronous JavaScript</a><br>[3] <a target="_blank" rel="noopener" href="https://github.com/getify/You-Dont-Know-JS/blob/1st-ed/async%20%26%20performance/ch1.md">You Don’t Know JS - Asynchrony</a><br>[4] <a target="_blank" rel="noopener" href="https://chanchandev.com/js/Async/async-sync-intro/2534378084/">Javascript 非同步 &amp; Event Loop！10 分鐘輕鬆圖解學習！</a><br>[5] <a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10206211">你懂 JavaScript 嗎？#22 非同步：現在和以後</a><br>[6] <a target="_blank" rel="noopener" href="https://ithelp.ithome.com.tw/articles/10194569">重新認識 JavaScript: Day 26 同步與非同步</a><br>[7] <a target="_blank" rel="noopener" href="https://www.youtube.com/watch?v=8aGhZQkoFbQ&ab_channel=JSConf">所以說 event loop 到底是什麼玩意兒？| Philip Roberts | JSConf EU</a><br>[8] <a target="_blank" rel="noopener" href="https://blog.huli.tw/2019/10/04/javascript-async-sync-and-callback/">JavaScript 中的同步與非同步（上）：先成為 callback 大師吧！</a><br>[9] <a target="_blank" rel="noopener" href="https://eyesofkids.gitbooks.io/javascript-start-from-es6/content/part4/eventloop.html">異步程式設計與事件迴圈</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://yoshuu.github.io/2022/09/27/JS12/" data-id="clgutruw30011di95huoy991m" data-title="JS之路 Day12 - Asynchronous Programming (非同步程式設計)" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/09/28/JS13/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          JS之路 Day13 - Event Loop (事件循環)
        
      </div>
    </a>
  
  
    <a href="/2022/09/26/JS11/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">JS之路 Day11 - Callback Funtion(回呼函式)</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分類</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/2022-iThome-%E9%90%B5%E4%BA%BA%E8%B3%BD/">2022 iThome 鐵人賽</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/css/">css</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/html/">html</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/sass/">sass</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%B4%BB%E5%8B%95%E5%BF%83%E5%BE%97/">活動心得</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%88%8A%E9%83%A8%E8%90%BD%E6%A0%BC%E7%A7%BB%E6%A4%8D%E6%96%87%E7%AB%A0/">舊部落格移植文章</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%82%84%E6%B2%92%E5%88%86%E9%A1%9E%E7%9A%84/">還沒分類的</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/" rel="tag">grid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/html/" rel="tag">html</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sass/" rel="tag">sass</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">標籤雲</h3>
    <div class="widget tagcloud">
      <a href="/tags/css/" style="font-size: 20px;">css</a> <a href="/tags/grid/" style="font-size: 10px;">grid</a> <a href="/tags/html/" style="font-size: 10px;">html</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/sass/" style="font-size: 10px;">sass</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">彙整</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/02/">二月 2023</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/11/">十一月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/10/">十月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/09/">九月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/08/">八月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/07/">七月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/06/">六月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">五月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">四月 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/03/">三月 2022</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/02/28/volta/">volta 使用筆記</a>
          </li>
        
          <li>
            <a href="/2022/11/29/nodeJS%20readline/">node.js 取得使用者輸入</a>
          </li>
        
          <li>
            <a href="/2022/11/28/web%20client%20challenge/">好想工作室的案主挑戰賽 參加心得</a>
          </li>
        
          <li>
            <a href="/2022/11/27/sass%20build%20environment/">建立sass環境(2022)</a>
          </li>
        
          <li>
            <a href="/2022/11/13/snippets/">如何在vscode設定自己想要的使用者片段</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 可以點選上方“Vic blog”回到首頁～<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginModelPath":"assets/","model":{"jsonPath":"/live2dw/assets/tororo.model.json"},"display":{"position":"right","width":350,"height":350},"mobile":{"show":false},"log":false,"pluginJsPath":"lib/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>