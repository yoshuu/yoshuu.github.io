---
title: JS之路 Day09 - What is Map ?
date: 2022-09-24 15:45:48
tags:
categories:
  - 2022 iThome 鐵人賽
---

## 前言

昨天把`set`講完，今天換`Map`，首先要注意不要跟`array`的方法`Array.prototype.map()`搞混，這是不一樣的東西，那就 let's go 今天的主題。

<!--more-->

`Map`跟`object`一樣都是`key-value pairs`，不同的是`Map`的`key`可以是任意類型。

## map 的基本方法跟屬性

- new Map() => 創造 map。
- set() => 為 map 裡面設定 key 跟 value。
- get() => 取出 map 裡面的 key 跟 value。
- delete() => 刪除 map 裡面的 key。
- has() => map 裡存在指定的 key。
- clear() => 刪除 map 裡面所有東西。
- size => 會回傳 map 裡面元素的數量。

有些其實跟`set`來使用看看吧：

```javascript
const map = new Map();
console.log(map); // Map(0) {}

// ↑一開始創建出來，map裡面是空的

map.set(1, "a");
map.set(2, "b");
map.set(3, "c");
console.log(map); // Map(3) { 1 => 'a', 2 => 'b', 3 => 'c' }

// ↑幫map新設定了三組key跟value

console.log(map.get(1)); // a

// ↑從map裡面取出key是1的value

map.delete(1);
console.log(map); // Map(2) { 2 => 'b', 3 => 'c' }

// ↑把map裡面key是1的那一個key-value pairs刪除

console.log(map.has(1)); // false
console.log(map.has(2)); // true

// ↑判斷map裡面有沒有叫做1跟2的key

console.log(map.size); // 2

// ↑map裡面數量有兩個

map.clear();
console.log(map); // Map(0) {}

// ↑把map裡面所有東西都清空
```

## 除了用`set()`添加元素外，也能透過`array`添加

先創立一個`Map`的空間出來，再`set()`是比較直覺添加元素的方式，但其實也可以直接在創建時就添加完畢，只要最開始創建的`new Map()`就直接塞`array`就可以達成。

```javascript
const fruits = new Map([
  ["apple", 10],
  ["banana", 5],
  ["orange", 10],
]);

console.log(fruits);
// Map(3) { 'apple' => 10, 'banana' => 5, 'orange' => 10 }
```

## `set()`除了可以添加元素外，也可以重新設置現有元素

`set()`在完全沒有東西時，是添加元素的功能，但在已經有東西的地方上，假如又在使用`set()`添加在同一個`key`東西上去，會直接覆蓋上一個`key`的`value`，因為同一組`key`只能同時擁有一組`value`，而這種方式也能達到重新設置現有元素的功能。

```javascript
const fruits = new Map();

fruits.set("apple", 10);
console.log(fruits); // Map(1) { 'apple' => 10 }

fruits.set("apple", 5);
console.log(fruits); // Map(1) { 'apple' => 5 }
```

## 創立 map 是使用`new Map()`，那我不想`new`行不行？

不行，`Map`一定只能用`new operator`來建立，`JavaScript`就是這樣規定的，不這樣做就會送你報錯。

```javascript
const map = Map();

//TypeError: Constructor Map requires 'new'
```

可以理解成一些特別的內建物件會需要用構造函數的方式來進行物件的實體化。
順帶一提，`Set`也是一定要用`new operator`，不然會送報錯。

## Map 用途

當希望物件的`key`不會重複時，可以使用`Map`，或者是想要讓物件的`key`是各種型別的時候。

還有順序如果很重要的話，就會考慮使用`Map`，因為使用`Map`時元素的使用順序會被保留。

## reference

[1] [MDN - Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)
[2] [W3Schools - JavaScript Maps](https://hackmd.io/5MY4uwR2TUOQmTLmk1f8xQ)
[3] [The Modern JavaScript Tutorial - Map and Set](https://javascript.info/map-set)
[4] [JS 原力覺醒 Day29 - Set / Map](https://www.muji.dev/2020/01/05/iron30-29)
[5] [PJCHENder -JavaScript Map](https://pjchender.dev/javascript/js-map/)
[6] [前端工程師用 javaScript 學演算法 - Map](https://ithelp.ithome.com.tw/articles/10214746)
